kind: pipeline
name: default

steps:
- name: setup
  image: node:lts-slim
  commands:
  - npm ci

- name: unit
  image: node:lts-slim
  commands:
  - npm run test:unit
  depends_on:
    - setup

- name: e2e
  image: cypress/base:10
  commands:
  - npm start & wait-on http://localhost:8080
  - cypress run
  depends_on:
    - setup